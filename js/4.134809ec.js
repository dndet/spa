(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"17a4":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"webgl-container"},[t("div",{staticClass:"video-section"},[t("div",{staticClass:"video-container"},[t("video",{ref:"videoStreamVideo",staticStyle:{width:"100%"},attrs:{autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}}),t("p",{staticClass:"caption"},[e._v("Video Stream Video")])]),t("div",{staticClass:"video-container relative"},[t("video",{ref:"videoStreamVideo2",staticStyle:{width:"100%"},attrs:{autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}}),t("video",{ref:"unityStreamVideo",staticStyle:{width:"100%"},attrs:{id:"unityStreamVideo",autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}}),t("p",{staticClass:"caption"},[e._v("Unity Stream Video")])])])])},o=[],s=i("daa8"),c={name:"WebGLReceiver",data(){return{unityPeerConnection:null,videoPeerConnection:null,socket:null}},mounted(){this.setupSocketConnection(),this.initWebRTC()},methods:{setupSocketConnection(){this.socket=Object(s["a"])("https://webrtcsvsocket.onrender.com",{withCredentials:!0,reconnection:!0}),this.socket.on("connect",(()=>{console.log("Connected to signaling server")})),this.socket.on("disconnect",(()=>{console.log("Disconnected from signaling server")})),this.listenToSocketEvents()},listenToSocketEvents(){this.socket.on("unity-offer",(async e=>{console.log("Received Unity offer after reload:",e),await this.unityPeerConnection.setRemoteDescription(new RTCSessionDescription(e));const t=await this.unityPeerConnection.createAnswer();await this.unityPeerConnection.setLocalDescription(t),this.socket.emit("unity-answer",t)})),this.socket.on("unity-candidate",(e=>{this.unityPeerConnection.addIceCandidate(new RTCIceCandidate(e)).catch((e=>console.error(e)))})),this.socket.on("video-offer",(async e=>{console.log("Received Video offer after reload:",e),await this.videoPeerConnection.setRemoteDescription(new RTCSessionDescription(e));const t=await this.videoPeerConnection.createAnswer();await this.videoPeerConnection.setLocalDescription(t),this.socket.emit("video-answer",t)})),this.socket.on("video-candidate",(e=>{this.videoPeerConnection.addIceCandidate(new RTCIceCandidate(e)).catch((e=>console.error(e)))}))},initWebRTC(){this.unityPeerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),this.videoPeerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),this.unityPeerConnection.ontrack=e=>{console.log("Received track for Unity Stream after reload:",e.track);const t=this.$refs.unityStreamVideo;t.srcObject=e.streams[0],t.play()},this.unityPeerConnection.onicecandidate=e=>{e.candidate&&this.socket.emit("unity-candidate",e.candidate)},this.videoPeerConnection.ontrack=e=>{console.log("Received track for Video Stream after reload:",e.track);const t=this.$refs.videoStreamVideo,i=this.$refs.videoStreamVideo2;t.srcObject=e.streams[0],i.srcObject=e.streams[0],t.play(),i.play()},this.videoPeerConnection.onicecandidate=e=>{e.candidate&&this.socket.emit("video-candidate",e.candidate)}}}},a=c,r=(i("ed42"),i("2877")),d=Object(r["a"])(a,n,o,!1,null,"38ad6e56",null);t["default"]=d.exports},a720:function(e,t,i){},ed42:function(e,t,i){"use strict";i("a720")}}]);